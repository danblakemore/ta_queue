- content_for :title do @board.title end
-#= content_for :javascripts do javascript_include_tag (current_user.student? ? "application-student" : "application-ta" ), "http://#{QUEUE_HOSTNAME}:8080/application.js" end
- content_for :javascripts do javascript_include_tag "application-backbone", "http://#{QUEUE_HOSTNAME}:8080/application.js" end
= content_for :stylesheets do stylesheet_link_tag "style", "show", "chalkboard" end
%table{ :class => "chalkboard" }
  %tr
    %td{ :class => "tl" }
    %td{ :class => "tm" }
    %td{ :class => "tm" }
    %td{ :class => "tm" }
    %td{ :class => "tr" }
  %tr
    %td{ :class => "ml" }
    %td{ :class => "mm" }
      #cork_board
        #control_panel
          #control_bar
            -#- if @current_user.student?
              -#%input{ :id => "enter_queue", :type => "button", :value => (@current_user.in_queue.nil? ? "Enter Queue" : "Exit Queue"), :style => ((@board.active? and not @board.frozen?) ? "display: none;" : "display: inline;") } 
              -#= button_to "Sign out", board_student_path(@board, @current_user), :method => :delete, :id => "sign_out", :class => "sign_out_with"
            -#- else
              -#%input{ :id => "activate_queue", :type => "button", :value => (@board.active? ? "Deactivate" : "Activate") }
              -#%input{ :id => "freeze_queue", :type => "button", :value => (@board.frozen? ? "Unfreeze" : "Freeze") }
              -#= button_to "Sign out", board_ta_path(@board, @current_user), :method => :delete, :id => "sign_out", :class => "sign_out_with"
        #student_welcome
          .post_it
            %b= @current_user.username
            .message
              - if @current_user.student?
                %span.position Position in queue: none
            = hidden_field_tag "board_title", @board.title
            = hidden_field_tag "user_token", @current_user.token
            = hidden_field_tag "user_id", @current_user.id.to_s
            = hidden_field_tag "is_ta", @current_user.ta?
        #tas_in_queue_header
          %div
            Available TAs
        #tas_in_queue
          #tas_list
    %td{ :class => "ml" }
      .border_container
        .borders
    %td{ :class => "mm" }
      #status_bar
        #notification
          No notifications
      #panes
        #queue_panel
          #queue_status
            - if @current_user.ta?
              Click to update queue status...
    %td{ :class => "mr" }
      #left_tab_bar
        #queue_tab
          .top_tab.left
          .content_tab.left
            Queue
          .bottom_tab.left
  %tr
    %td{ :class => "bl" }
    %td{ :class => "bm" }
    %td{ :class => "bm" }
    %td{ :class => "bm" }
    %td{ :class => "br" }
= render "boards/beta"

- if current_user.ta?
  :javascript
    $(function() {
      window.current_user = new TaQueue.Models.Ta({ username:"#{current_user.username}" })
    });
- else
  :javascript
    $(function() {
      window.current_user = new TaQueue.Models.Student({ username:"#{current_user.username}", location:"#{current_user.location}" })
    });

:javascript
  $(function() {
    window.queue = new TaQueue.Models.Queue
    window.queue.set(#{render_queue});
    window.queueRouter = new TaQueue.Routers.QueuesRouter({ queue:window.queue, current_user:window.current_user })
  });


